# $Id: Dockerfile-kafka-alpine 431 2021-10-06 06:48:09Z bpahlawa $
# $Author: bpahlawa $
# Created: 26-APR-2021
# Modified by: bpahlawa
# $Date: 2021-10-06 14:48:09 +0800 (Wed, 06 Oct 2021) $
# $Revision: 431 $
#
# Server #1 (zookeper and kafka server #1)
#docker run -it --name kafka1 -p 9092:9092 -p 2181:2181 -p 2999-3000:2999-3000 -e ZOOKEEPER_ID=1 -e ZOOKEEPER_SERVER1="192.168.0.158:2999:3000" -e ZOOKEEPER_SERVER2="192.168.0.158:3001:3002" -e ZOOKEEPER_SERVER3="192.168.0.158:3003:3004" -e ZOOKEEPER_CLIENT_PORT1=2181 -e ZOOKEEPER_CLIENT_PORT2=2182 -e ZOOKEEPER_CLIENT_PORT3=2183 -e KAFKA_INIT_CONFIG=yes -v /opt/kafka:/opt/kafkadata kafka
#
# Server #2 (zookeeper and kafka server #2)
#docker run -it --name kafka2 -p 9093:9093 -p 2182:2182 -p 3001-3002:3001-3002 -e ZOOKEEPER_ID=2 -e KAFKA_BROKER_ID=1 -e KAFKA_PORT=9093 -e ZOOKEEPER_SERVER1="192.168.0.158:2999:3000" -e ZOOKEEPER_SERVER2="192.168.0.158:3001:3002" -e ZOOKEEPER_SERVER3="192.168.0.158:3003:3004" -e ZOOKEEPER_CLIENT_PORT1=2181 -e ZOOKEEPER_CLIENT_PORT2=2182 -e ZOOKEEPER_CLIENT_PORT3=2183 -e KAFKA_INIT_CONFIG=yes -v /opt/kafka2:/opt/kafkadata kafka
#
# Server #3 (zookeeper and kafka server #3)
#docker run -it --name kafka3 -p 9094:9094 -p 2183:2183 -p 3003-3004:3003-3004 -e ZOOKEEPER_ID=3 -e KAFKA_BROKER_ID=2 -e KAFKA_PORT=9094 -e ZOOKEEPER_SERVER1="192.168.0.158:2999:3000" -e ZOOKEEPER_SERVER2="192.168.0.158:3001:3002" -e ZOOKEEPER_SERVER3="192.168.0.158:3003:3004" -e ZOOKEEPER_CLIENT_PORT1=2181 -e ZOOKEEPER_CLIENT_PORT2=2182 -e ZOOKEEPER_CLIENT_PORT3=2183 -e KAFKA_INIT_CONFIG=yes -v /opt/kafka3:/opt/kafkadata kafka
#
# add entrypoint.sh in base64 to Dockerfile
# echo -e " && echo \"$(cat kafka.env | base64 -w0)\" | base64 -d > /usr/local/bin/kafka.env && chmod ugo+x /usr/local/bin/kafka.env \\" >> Dockerfile-kafka-alpine
# echo -e " && echo \"$(cat entrypoint-kafka.sh | base64 -w0)\" | base64 -d > /usr/local/bin/entrypoint-kafka.sh && chmod ugo+x /usr/local/bin/entrypoint-kafka.sh\nENTRYPOINT [\"/usr/local/bin/entrypoint-kafka.sh\"]" >> Dockerfile-kafka-alpine


# docker build --tag kafka -f ./Dockerfile-kafka-alpine /tmp

FROM alpine:latest
MAINTAINER brpahlawa

ENV KAFKA_VER=3.0.0 KAFKA_HOME=/opt/kafka

RUN apk update \
 && apk upgrade \
 && apk add bash coreutils su-exec curl ca-certificates jq openjdk11-jre gnupg procps \
 && mkdir -p $KAFKA_HOME \
 && wget -O /tmp/KEYS https://downloads.apache.org/kafka/KEYS \
 && gpg --import /tmp/KEYS \
 && wget -q -O /tmp/kafka.tgz https://downloads.apache.org/kafka/${KAFKA_VER}/kafka_2.13-${KAFKA_VER}.tgz \
 && wget -O /tmp/kafka.asc https://downloads.apache.org/kafka/${KAFKA_VER}/kafka_2.13-${KAFKA_VER}.tgz.asc \
 && gpg --verify /tmp/kafka.asc /tmp/kafka.tgz \
 && tar xvfz /tmp/kafka.tgz -C $KAFKA_HOME  --strip-components 1 \
 && mv $KAFKA_HOME/config $KAFKA_HOME/.kafka \
 && ln -sf $KAFKA_HOME/../kafkadata/config $KAFKA_HOME/config \
 && ln -sf $KAFKA_HOME/../kafkadata/logs $KAFKA_HOME/logs \
 && adduser -D -h $KAFKA_HOME -s /bin/bash kafka \
 && mkdir -p $KAFKA_HOME/../kafkadata \
 && touch $KAFKA_HOME/../kafkadata/notmapped \
 && chown -R kafka:kafka $KAFKA_HOME \
 && rm -rf /tmp/* /var/tmp/* \
 && echo "export KAFKA_HOME=/opt/kafka" > $KAFKA_HOME/.bash_profile \
 && echo "export JAVA_HOME=/usr/lib/jvm/default-jvm" >> $KAFKA_HOME/.bash_profile \
 && echo "export PATH=\$KAFKA_HOME/bin:\$PATH:~/.local/bin:\$JAVA_HOME/bin:\$JAVA_HOME/jre/bin" >> $KAFKA_HOME/.bash_profile \
 && chown kafka:kafka $KAFKA_HOME/.bash_profile \
 && echo "IyEvYmluL2Jhc2gKIyAkSWQ6IGthZmthLmVudiA0MzAgMjAyMS0xMC0wNCAxNToyOToxM1ogYnBhaGxhd2EgJAojIENyZWF0ZWQgMDUtTUFSLTIwMTkKIyAkQXV0aG9yOiBicGFobGF3YSAkCiMgJERhdGU6IDIwMjEtMTAtMDQgMjM6Mjk6MTMgKzA4MDAgKE1vbiwgMDQgT2N0IDIwMjEpICQKIyAkUmV2aXNpb246IDQzMCAkCiMKCmV4cG9ydCBaT09LRUVQRVJfREFUQV9ESVI9JHtaT09LRUVQRVJfREFUQV9ESVI6LSIvb3B0L2thZmthZGF0YS96b29rZWVwZXIifQpleHBvcnQgWk9PS0VFUEVSX0NMSUVOVF9QT1JUMT0ke1pPT0tFRVBFUl9DTElFTlRfUE9SVDE6LTIxODF9CiNaT09LRUVQRVJfQURNU0VSVkVSX0VOQUJMRUQ9JHtaT09LRUVQRVJfQURNU0VSVkVSX0VOQUJMRUQ6LSJ0cnVlIn0KI1pPT0tFRVBFUl9BRE1TRVJWRVJfUE9SVD0ke1pPT0tFRVBFUl9BRE1TRVJWRVJfUE9SVDotODA4MX0KI1pPT0tFRVBFUl9NQVhDTElFTlRfQ09OTkVDVElPTlM9JHtaT09LRUVQRVJfTUFYQ0xJRU5UX0NPTk5FQ1RJT05TOi0wfQojWk9PS0VFUEVSX0NPTk5FQ1RJT05fVElNRU9VVD0ke1pPT0tFRVBFUl9DT05ORUNUSU9OX1RJTUVPVVQ6LTE4MDAwfQpleHBvcnQgWk9PS0VFUEVSX1NFUlZFUl9OQU1FPSR7Wk9PS0VFUEVSX1NFUlZFUl9OQU1FOi0iJChob3N0bmFtZSAtaSkifQpleHBvcnQgWk9PS0VFUEVSX1NFUlZFUjE9JHtaT09LRUVQRVJfU0VSVkVSMTotIiJ9CmV4cG9ydCBaT09LRUVQRVJfSUQ9JHtaT09LRUVQRVJfSUQ6LSIxIn0KZXhwb3J0IFpPT0tFRVBFUl9DTElFTlRfUE9SVDI9JHtaT09LRUVQRVJfQ0xJRU5UX1BPUlQyOi0yMTgxfQpleHBvcnQgWk9PS0VFUEVSX0NMSUVOVF9QT1JUMz0ke1pPT0tFRVBFUl9DTElFTlRfUE9SVDM6LTIxODF9CmV4cG9ydCBaT09LRUVQRVJfU0VSVkVSMj0ke1pPT0tFRVBFUl9TRVJWRVIyOi0iIn0KZXhwb3J0IFpPT0tFRVBFUl9TRVJWRVIzPSR7Wk9PS0VFUEVSX1NFUlZFUjM6LSIifQoKZXhwb3J0IEtBRktBX0lOSVRfQ09ORklHPSR7S0FGS0FfSU5JVF9DT05GSUc6LSJubyJ9CiNib3RoPWthZmthIGFuZCB6b29rZWVwZXIKZXhwb3J0IE5PREVfVVNBR0U9JHtOT0RFX1VTQUdFOi0iYm90aCJ9CmV4cG9ydCBLQUZLQV9CUk9LRVJfSUQ9JHtLQUZLQV9CUk9LRVJfSUQ6LSIwIn0KZXhwb3J0IEtBRktBX0JST0tFUl9SQUNLPSR7S0FGS0FfQlJPS0VSX1JBQ0s6LSJyYWNrMSJ9CiNLQUZLQV9ORVRXT1JLX1RIUkVBRFM9JHtLQUZLQV9ORVRXT1JLX1RIUkVBRFM6LTN9CiNLQUZLQV9JT19USFJFQURTPSR7S0FGS0FfSU9fVEhSRUFEUzotOH0KI0tBRktBX1NPQ0tTRU5EX0JVRkZFUj0ke0tBRktBX1NPQ0tTRU5EX0JVRkZFUjotMTAyNDAwfQojS0FGS0FfU09DS1JFQ1ZfQlVGRkVSPSR7S0FGS0FfU09DS1JFQ1ZfQlVGRkVSOi0xMDI0MDB9CiNLQUZLQV9TT0NLUkVRX01BWEJZVEVTPSR7S0FGS0FfU09DS1JFUV9NQVhCWVRFUzotMTA0ODU3NjAwfQpleHBvcnQgS0FGS0FfTE9HU19ESVI9JHtLQUZLQV9MT0dTX0RJUjotIi9vcHQva2Fma2FkYXRhL2xvZ3MifQojS0FGS0FfTlVNX1BBUlRJVElPTlM9JHtLQUZLQV9OVU1fUEFSVElUSU9OUzotMX0KI0tBRktBX1JFQ09USFJFQURfUEVSREFUQURJUj0ke0tBRktBX1JFQ09USFJFQURfUEVSREFUQURJUjotMX0KI0tBRktBX09GRlNFVFNUT1BJQ19SRVBMSUNBRkFDVE9SPSR7S0FGS0FfT0ZGU0VUU1RPUElDX1JFUExJQ0FGQUNUT1I6LTF9CiNLQUZLQV9UUkFOU1RBVEVMT0dfUkVQTElDQUZBQ1RPUj0ke0tBRktBX1RSQU5TVEFURUxPR19SRVBMSUNBRkFDVE9SOi0xfQojS0FGS0FfVFJBTlNUQVRFTE9HX01JTklTUj0ke0tBRktBX1RSQU5TVEFURUxPR19NSU5JU1I6LTF9CiNLQUZLQV9MT0dGTFVTSF9JTlRFUlZBTE1TRz0ke0tBRktBX0xPR0ZMVVNIX0lOVEVSVkFMTVNHOi0xMDAwMH0KI0tBRktBX0xPR0ZMVVNIX0lOVEVSVkFMVElNRT0ke0tBRktBX0xPR0ZMVVNIX0lOVEVSVkFMVElNRTotMTAwfQojS0FGS0FfTE9HUkVURU5USU9OX0hPVVJTPSR7S0FGS0FfTE9HUkVURU5USU9OX0hPVVJTOi0xNjh9CiNLQUZLQV9MT0dSRVRFTlRJT05fQllURVM9JHtLQUZLQV9MT0dSRVRFTlRJT05fQllURVM6LTEwNzM3NDE4MjR9CiNLQUZLQV9MT0dSRVRFTlRJT05fQ0hFQ0tJTlRFUlZBTD0ke0tBRktBX0xPR1JFVEVOVElPTl9DSEVDS0lOVEVSVkFMOi0zMDAwMDB9CiNLQUZLQV9MT0dTRUdNRU5UX0JZVEVTPSR7S0FGS0FfTE9HU0VHTUVOVF9CWVRFUzotMTA3Mzc0MTgyNH0KZXhwb3J0IEtBRktBX1BPUlQ9JHtLQUZLQV9QT1JUOi0iOTA5MiJ9CmV4cG9ydCBLQUZLQV9IT1NUX1BPUlQ9JHtLQUZLQV9IT1NUX1BPUlQ6LSQoaG9zdG5hbWUgLWkpOiRLQUZLQV9QT1JUfQpleHBvcnQgS0FGS0FfQk9PVFNUUkFQX1NFUlZFUlM9JHtLQUZLQV9CT09UU1RSQVBfU0VSVkVSUzotJEtBRktBX0hPU1RfUE9SVH0KI0tBRktBX0NPTVBSRVNTSU9OX1RZUEU9JHtLQUZLQV9DT01QUkVTU0lPTl9UWVBFOi0ibm9uZSJ9CmV4cG9ydCBLQUZLQV9QQVJUSVRJT05FUl9DTEFTUz0ke0tBRktBX1BBUlRJVElPTkVSX0NMQVNTOi0iIn0KZXhwb3J0IEtBRktBX1JFUVVFU1RfVElNRU9VVD0ke0tBRktBX1JFUVVFU1RfVElNRU9VVDotIiJ9CmV4cG9ydCBLQUZLQV9NQVhfQkxPQ0s9JHtLQUZLQV9NQVhfQkxPQ0s6LSIifQpleHBvcnQgS0FGS0FfTElOR0VSPSR7S0FGS0FfTElOR0VSOi0iIn0KZXhwb3J0IEtBRktBX01BWFJFUV9TSVpFPSR7S0FGS0FfTUFYUkVRX1NJWkU6LSIifQpleHBvcnQgS0FGS0FfQkFUQ0hfU0laRT0ke0tBRktBX0JBVENIX1NJWkU6LSIifQpleHBvcnQgS0FGS0FfQlVGRkVSX01FTU9SWT0ke0tBRktBX0JVRkZFUl9NRU1PUlk6LSIifQpleHBvcnQgS0FGS0FfTElTVEVORVJTPSR7S0FGS0FfTElTVEVORVJTOi0iUExBSU5URVhUOi8vJHtLQUZLQV9IT1NUX1BPUlR9In0KCiNLQUZLQV9JT19GSUxFQlVGRkVSPSR7S0FGS0FfSU9fRklMRUJVRkZFUjotMTMxMDcyfQojS0FGS0FfQVVUT09GRlNFVF9SRVNFVAo=" | base64 -d > /usr/local/bin/kafka.env && chmod ugo+x /usr/local/bin/kafka.env \
 && echo "IyEvYmluL2Jhc2gKIyAkSWQ6IGVudHJ5cG9pbnQtaGFkb29wLnNoIDQxMCAyMDIxLTA3LTEyIDAwOjIzOjQ0WiBicGFobGF3YSAkCiMgQ3JlYXRlZCAwNS1NQVItMjAxOQojICRBdXRob3I6IGJwYWhsYXdhICQKIyAkRGF0ZTogMjAyMS0wNy0xMiAwODoyMzo0NCArMDgwMCAoTW9uLCAxMiBKdWwgMjAyMSkgJAojICRSZXZpc2lvbjogNDEwICQKI35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4KCnNvdXJjZSBrYWZrYS5lbnYKClpPT0tFRVBFUl9JU19SVU5OSU5HPTAKCnNldF9jb25maWcoKQp7CiAgIENGR0ZJTEU9IiQxIgogICBLRVk9IiQyIgogICBWQUxVRT0iJDMiCiAgIFtbICEgLWYgJENGR0ZJTEUgXV0gJiYgZWNobyAiRmlsZSAkQ0ZHRklMRSBkb2VzbnQgZXhpc3QuLi4iICYmIHJldHVybiAxCiAgIFtbICQoZ3JlcCAiJEtFWSIgJENGR0ZJTEUgfCB3YyAtbCkgLWVxIDAgXV0gJiYgZWNobyAiS2V5IHBhcmFtZXRlciAkS0VZIGRvZXNudCBleGlzdC4uIiAmJiByZXR1cm4gMQogICBzZWQgLWkgInN8XlsjXHxdKlwoJHtLRVl9XHMqPVwpXHMqXCguKlwpfFwxJHtWQUxVRX18ZyIgJENGR0ZJTEUKfQoKZ2V0X2NvbmZpZygpCnsKICAgQ0ZHRklMRT0iJDEiCiAgIEtFWT0iJDIiCiAgIFtbICEgLWYgJENGR0ZJTEUgXV0gJiYgZWNobyAiRmlsZSAkQ0ZHRklMRSBkb2VzbnQgZXhpc3QuLi4iICYmIGV4aXQgMQogICBbWyAkKGdyZXAgIiRLRVkiICRDRkdGSUxFIHwgd2MgLWwpIC1lcSAwIF1dICYmIGVjaG8gIktleSBwYXJhbWV0ZXIgJEtFWSBkb2VzbnQgZXhpc3QuLiIgJiYgcmV0dXJuIDEKICAgc2VkIC1uICJzfF5cKCR7S0VZfVxzKj1cKVxzKlwoLipcKXxcMnxwIiAkQ0ZHRklMRQp9CgpnZW5fY29uZmlnKCkKewogICBDRkdGSUxFPSIkMSIKICAgS0VZPSIkMiIKICAgVkFMVUU9IiQzIgogICBGT1JDRT0iJDQiCiAgIFtbICEgLWYgJENGR0ZJTEUgJiYgIiRGT1JDRSIgPSAiIiBdXSAmJiBlY2hvICJGaWxlICRDRkdGSUxFIGRvZXNudCBleGlzdC4uLiIgJiYgZXhpdCAxCiAgIFtbICQoZ3JlcCAiJEtFWSIgJENGR0ZJTEUgfCB3YyAtbCkgLWVxIDAgJiYgIiRGT1JDRSIgPSAiIiBdXSAmJiBlY2hvICJLZXkgcGFyYW1ldGVyICRLRVkgZG9lc250IGV4aXN0Li4iICYmIGV4aXQgMQogICBpZiBbICIkVkFMVUUiICE9ICIiIF0KICAgdGhlbgogICAgICBpZiBbICIkRk9SQ0UiID0gIjEiIF0KICAgICAgdGhlbgogICAgICAgICBlY2hvICIke0tFWX09JHtWQUxVRX0iID4+ICRDRkdGSUxFCiAgICAgIGVsc2UKICAgICAgICAgc2V0X2NvbmZpZyAiJENGR0ZJTEUiICIkS0VZIiAiJFZBTFVFIgogICAgICBmaQogICBmaQp9IAoKICAgCgpjb3B5X2thZmthX2NvbmZpZygpCnsKICAgc3UgLSBrYWZrYSAtYyAiCiAgIGZvciBUQVJHRVRGSUxFIGluIFwkKGxzIC0xIC0tZmlsZS10eXBlICRLQUZLQV9IT01FLy5rYWZrYSB8IGdyZXAgLXYgLykKICAgZG8KICAgICAgaWYgW1sgISAtZiAkS0FGS0FfSE9NRS8uLi9rYWZrYWRhdGEvY29uZmlnL1wkVEFSR0VURklMRSB8fCBcIiRLQUZLQV9JTklUX0NPTkZJR1wiID0gXCJ5ZXNcIiBdXQogICAgICB0aGVuCiAgICAgICAgIGNwIC1mIFwiJEtBRktBX0hPTUUvLmthZmthL1wkVEFSR0VURklMRVwiIFwiJHtLQUZLQV9IT01FfS8uLi9rYWZrYWRhdGEvY29uZmlnXCIKICAgICAgZmkKICAgZG9uZQoiCn0KCnJ1bl9rYWZrYSgpCnsKICAgZWNobyAiU3RhcnRpbmcgdXAga2Fma2EuLi4iCiAgIGJpbi9rYWZrYS1zZXJ2ZXItc3RhcnQuc2ggJEtBRktBX0hPTUUvY29uZmlnL3NlcnZlci5wcm9wZXJ0aWVzIAogICBbWyAkPyAtbmUgMCBdXSAmJiBlY2hvICJGYWlsZWQgdG8gc3RhcnQga2Fma2EuLi4iICYmIGV4aXQgMSAKfQoKcnVuX3pvb2tlZXBlcigpCnsKCiAgIFtbICIkWk9PS0VFUEVSX0lTX1JVTk5JTkciID0gIjEiIF1dICYmIGVjaG8gIlpvb2tlZXBlciBTZXJ2ZXIgd2l0aCB6b29rZWVwZXIgaWQgOiAkWk9PS0VFUEVSX0lEIGlzIGFscmVhZHkgcnVubmluZyBvbiBvdGhlciBub2RlLi4uZXhpdGluZy4uLiIgJiYgZXhpdCAxCiAgIFtbICIkWk9PS0VFUEVSX0lEIiAtZ3QgMyBdXSAmJiBlY2hvICJNYXggbm8gb2YgWm9va2VlcGVyIFNlcnZlcnMgaXMgMyAiICYmIGV4aXQgMSAKICAgZWNobyAiU3RhcnRpbmcgdXAgem9va2VlcGVyIFNlcnZlci4uLiIKICAgYmluL3pvb2tlZXBlci1zZXJ2ZXItc3RhcnQuc2ggLWRhZW1vbiAkS0FGS0FfSE9NRS9jb25maWcvem9va2VlcGVyLnByb3BlcnRpZXMgCiAgIFtbICQ/IC1uZSAwIF1dICYmIGVjaG8gIkZhaWxlZCB0byBzdGFydCB6b29rZWVwZXIuLi4iICYmIGV4aXQgMSAKCiAgIGlmIFsgIiRaT09LRUVQRVJfQ0xVU1RFUiIgPSAiMSIgXQogICB0aGVuCiAgICAgIFtbICIkWk9PS0VFUEVSX1NFUlZFUjEiID0gIiIgfHwgIiRaT09LRUVQRVJfU0VSVkVSMyIgPSAiIiB8fCAiJFpPT0tFRVBFUl9TRVJWRVIyIiA9ICIiIF1dICYmIGVjaG8gIlpvb2tlZXBlciBjbHVzdGVyIG11c3QgaGF2ZSAzIHNlcnZlcnMhIS4uIGV4aXRpbmcuLiIgJiYgZXhpdCAxCiAgICAgIFpTVEFUMT0iIgogICAgICBaU1RBVDI9IiIKICAgICAgWlNUQVQzPSIiCiAgICAgIGVjaG8gIkNoZWNraW5nIHdoZXRoZXIgYWxsIHpvb2tlZXBlciBub2RlcyBhcmUgcnVubmluZy4uLi4iCiAgICAgIHdoaWxlIFsgIiRaU1RBVDEiID0gIiIgLW8gIiRaU1RBVDIiID0gIiIgLW8gIiRaU1RBVDMiID0gIiIgXQogICAgICBkbwogICAgICAgICBaT09TRVJWRVIxPSQoZWNobyAkWk9PS0VFUEVSX1NFUlZFUjEgfCBjdXQgLWYxIC1kOikKICAgICAgICAgWk9PU0VSVkVSMj0kKGVjaG8gJFpPT0tFRVBFUl9TRVJWRVIyIHwgY3V0IC1mMSAtZDopCiAgICAgICAgIFpPT1NFUlZFUjM9JChlY2hvICRaT09LRUVQRVJfU0VSVkVSMyB8IGN1dCAtZjEgLWQ6KQogICAgICAgICBaU1RBVDE9JChlY2hvIHJ1b2sgfCBuYyAtdiAkWk9PU0VSVkVSMSAkWk9PS0VFUEVSX0NMSUVOVF9QT1JUMSAtdzEgMj4vZGV2L251bGwpCiAgICAgICAgIFtbICRaU1RBVDEgPSAiIiBdXSAmJiBlY2hvICJab29rZWVwZXIgU2VydmVyICR7Wk9PU0VSVkVSMX06JHtaT09LRUVQRVJfQ0xJRU5UX1BPUlQxfSBpcyBzdGlsbCBub3QgcnVubmluZy4uLi4iCiAgICAgICAgIFpTVEFUMj0kKGVjaG8gcnVvayB8IG5jIC12ICRaT09TRVJWRVIyICRaT09LRUVQRVJfQ0xJRU5UX1BPUlQyIC13MSAyPi9kZXYvbnVsbCkKICAgICAgICAgW1sgJFpTVEFUMiA9ICIiIF1dICYmIGVjaG8gIlpvb2tlZXBlciBTZXJ2ZXIgJFpPT1NFUlZFUjI6JHtaT09LRUVQRVJfQ0xJRU5UX1BPUlQyfSBpcyBzdGlsbCBub3QgcnVubmluZy4uLi4iCiAgICAgICAgIFpTVEFUMz0kKGVjaG8gcnVvayB8IG5jIC12ICRaT09TRVJWRVIzICRaT09LRUVQRVJfQ0xJRU5UX1BPUlQzIC13MSAgMj4vZGV2L251bGwpCiAgICAgICAgIFtbICRaU1RBVDMgPSAiIiBdXSAmJiBlY2hvICJab29rZWVwZXIgU2VydmVyICRaT09TRVJWRVIzOiR7Wk9PS0VFUEVSX0NMSUVOVF9QT1JUM30gaXMgc3RpbGwgbm90IHJ1bm5pbmcuLi4uIgogICAgICAgICBzbGVlcCAxMAogICAgIGRvbmUKICAgZmkKICAgCiAgIGlmIFsgIiROT0RFX1VTQUdFIiA9ICJ6b29rZWVwZXIiIF0KICAgdGhlbgogICAgICBiaW4vem9va2VlcGVyLXNlcnZlci1zdG9wLnNoCiAgICAgIGJpbi96b29rZWVwZXItc2VydmVyLXN0YXJ0LnNoICRLQUZLQV9IT01FL2NvbmZpZy96b29rZWVwZXIucHJvcGVydGllcwogICBmaQp9CgoKSkFWQVNZTUxJTks9JCh3aGljaCBqYXZhKQpKQVZBQklOPSQocmVhZGxpbmsgLWYgJEpBVkFTWU1MSU5LKQpKQVZBX0hPTUU9JHtKQVZBQklOLyVcL2JpblwvamF2YX0KCltbICEgLWQgJEpBVkFfSE9NRSBdXSAmJiBlY2hvICJUaGlzIGlzIG5vdCBhIGRpcmVjdG9yeSBvZiBKQVZBX0hPTUUgPSAkSkFWQV9IT01FIiAmJiBleGl0IDEKZWNobyAiVXNpbmcgSkFWQV9IT01FID0gJEpBVkFfSE9NRSAiCmlmIFsgIiQxIiA9ICJzdG9wYWxsIiBdCnRoZW4KICAgJEtBRktBX0hPTUUvYmluL2thZmthLXNlcnZlci1zdG9wLnNoIAogICAkS0FGS0FfSE9NRS9iaW4vem9va2VlcGVyLXNlcnZlci1zdG9wLnNoCiAgIGV4aXQgMApmaQoKW1sgLWYgIiR7S0FGS0FfSE9NRX0vLi4va2Fma2FkYXRhL25vdG1hcHBlZCIgXV0gJiYgZWNobyAiV3JvbmcgZmlsZXN5c3RlbSBtYXBwaW5nLCB5b3UgbXVzdCBtYXAgL29wdC9rYWZrYWRhdGEgdG8gaG9zdCBmaWxlc3lzdGVtLCBFLmc6IC12IC9vcHQvaG9zdGRpcjovb3B0L2thZmthZGF0YSIgJiYgZXhpdCAxCltbICIkS0FGS0FfTE9HU19ESVIiICE9ICIiIF1dICYmIFtbICEgLWQgIiRLQUZLQV9MT0dTX0RJUiIgXV0gJiYgbWtkaXIgLXAgJEtBRktBX0xPR1NfRElSCltbICIkWk9PS0VFUEVSX0RBVEFfRElSIiAhPSAiIiBdXSAmJiBbWyAhIC1kICIkWk9PS0VFUEVSX0RBVEFfRElSIiBdXSAmJiBta2RpciAtcCAkWk9PS0VFUEVSX0RBVEFfRElSCltbICEgLWQgIiR7S0FGS0FfSE9NRX0vLi4va2Fma2FkYXRhL2NvbmZpZyIgXV0gJiYgbWtkaXIgLXAgIiR7S0FGS0FfSE9NRX0vLi4va2Fma2FkYXRhL2NvbmZpZyIgCgpjaG93biAtUiBrYWZrYTprYWZrYSAiJHtLQUZLQV9IT01FfS8uLi9rYWZrYWRhdGEvIgoKZWNobyAiQ29weWluZyBhbGwga2Fma2EgY29uZmlnIGZpbGVzIHRvIHBlcnNpc3RlbnQgZGlzay4uLiIKCgoKaWYgWyAiJEtBRktBX0lOSVRfQ09ORklHIiA9ICJ5ZXMiIC1vICEgLWYgIiRLQUZLQV9IT01FLy4uL2thZmthZGF0YS9jb25maWcvc2VydmVyLnByb3BlcnRpZXMiIF0KdGhlbgoKICAgZWNobyAiSW5pdGlhdGluZyBrYWZrYSBjb25maWcgZmlsZS4uLiIKICAgY29weV9rYWZrYV9jb25maWcKICAgZmluZCAkS0FGS0FfSE9NRSAtbmFtZSAibWV0YS5wcm9wZXJ0aWVzIiAtZXhlYyBybSAtZiB7fSBcOwogICBbWyAtZCAkS0FGS0FfSE9NRS9sb2dzIF1dICYmIHJtIC1mICRLQUZLQV9IT01FL2xvZ3MvKgogICBlY2hvICJDcmVhdGluZyBjb25maWcgZmlsZSB6b29rZWVwZXIucHJvcGVydGllcyIKICAgZ2VuX2NvbmZpZyAiJEtBRktBX0hPTUUvY29uZmlnL3pvb2tlZXBlci5wcm9wZXJ0aWVzIiAiZGF0YURpciIgIiR7Wk9PS0VFUEVSX0RBVEFfRElSfSIKICAgZ2VuX2NvbmZpZyAiJEtBRktBX0hPTUUvY29uZmlnL3pvb2tlZXBlci5wcm9wZXJ0aWVzIiAibWF4Q2xpZW50Q254bnMiICIke1pPT0tFRVBFUl9NQVhDTElFTlRfQ09OTkVDVElPTlN9IgogICBnZW5fY29uZmlnICIkS0FGS0FfSE9NRS9jb25maWcvem9va2VlcGVyLnByb3BlcnRpZXMiICJhZG1pbi5lbmFibGVTZXJ2ZXIiICIke1pPT0tFRVBFUl9BRE1TRVJWRVJfRU5BQkxFRH0iCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy96b29rZWVwZXIucHJvcGVydGllcyIgImFkbWluLnNlcnZlclBvcnQiICIke1pPT0tFRVBFUl9BRE1TRVJWRVJfUE9SVH0iCgogICBaT09LRUVQRVJfQ0xJRU5UX1BPUlQ9IlpPT0tFRVBFUl9DTElFTlRfUE9SVCR7Wk9PS0VFUEVSX0lEfSIKICAgZ2VuX2NvbmZpZyAiJEtBRktBX0hPTUUvY29uZmlnL3pvb2tlZXBlci5wcm9wZXJ0aWVzIiAiY2xpZW50UG9ydCIgIiR7IVpPT0tFRVBFUl9DTElFTlRfUE9SVH0iCgogICBpZiBbICIkTk9ERV9VU0FHRSIgIT0gImthZmthIiBdCiAgIHRoZW4KICAgICAgWk9PS0VFUEVSX0NVUlJFTlRfU0VSVkVSPSJaT09LRUVQRVJfU0VSVkVSJHtaT09LRUVQRVJfSUR9IgoKICAgICAgWk9PS0VFUEVSX0NVUlJDTFVTVEVSX1BPUlRTPSIkeyFaT09LRUVQRVJfQ1VSUkVOVF9TRVJWRVJ9IgoKICAgICAgI1Rlc3Rpbmcgd2hldGhlciB6b29rZWVwZXIgc2VydmVyIGFscmVhZHkgcnVubmluZyBvbiBvdGhlciBub2RlCiAgICAgIFpPT1NFUlZFUj0kKGVjaG8gJFpPT0tFRVBFUl9DVVJSQ0xVU1RFUl9QT1JUUyB8IGN1dCAtZjEgLWQ6KQogICAgICBaU1RBVD0kKGVjaG8gcnVvayB8IG5jIC12ICRaT09TRVJWRVIgJHshWk9PS0VFUEVSX0NMSUVOVF9QT1JUfSAtdzEgMj4vZGV2L251bGwpCiAgICAgIFtbICIkWlNUQVQiICE9ICIiIF1dICYmIFpPT0tFRVBFUl9JU19SVU5OSU5HPSIxIgoKICAgICAgZXhwb3J0IFpPT0tFRVBFUl9TRVJWRVIke1pPT0tFRVBFUl9JRH09IiQoaG9zdG5hbWUgLWkpOiQoIGVjaG8gJFpPT0tFRVBFUl9DVVJSQ0xVU1RFUl9QT1JUUyB8IGN1dCAtZjItIC1kOiApIgoKICAgICAgWk9PS0VFUEVSX1NFUlZFUl9DT05ORUNUPSIkKGVjaG8gJFpPT0tFRVBFUl9TRVJWRVIxIHwgY3V0IC1mMSAtZDopOiRaT09LRUVQRVJfQ0xJRU5UX1BPUlQxIgogICAKICAgICAgaWYgWyAiJFpPT0tFRVBFUl9TRVJWRVIyIiAhPSAiIiBdCiAgICAgIHRoZW4KICAgICAgICAgZWNobyAiUnVubmluZyB6b29rZWVwZXIgY2x1c3Rlci4uLiIKICAgICAgICAgZWNobyAic3luY0xpbWl0PTUiID4+ICIkS0FGS0FfSE9NRS9jb25maWcvem9va2VlcGVyLnByb3BlcnRpZXMiCiAgICAgICAgIGVjaG8gImluaXRMaW1pdD0xMCIgPj4gIiRLQUZLQV9IT01FL2NvbmZpZy96b29rZWVwZXIucHJvcGVydGllcyIKICAgICAgICAgZWNobyAic2VydmVyLjE9JHtaT09LRUVQRVJfU0VSVkVSMX0iID4+ICIkS0FGS0FfSE9NRS9jb25maWcvem9va2VlcGVyLnByb3BlcnRpZXMiCiAgICAgICAgIGVjaG8gInNlcnZlci4yPSR7Wk9PS0VFUEVSX1NFUlZFUjJ9IiA+PiAiJEtBRktBX0hPTUUvY29uZmlnL3pvb2tlZXBlci5wcm9wZXJ0aWVzIgogICAgICAgICBaT09LRUVQRVJfU0VSVkVSX0NPTk5FQ1Q9IiR7Wk9PS0VFUEVSX1NFUlZFUl9DT05ORUNUfSwkKGVjaG8gJFpPT0tFRVBFUl9TRVJWRVIyIHwgY3V0IC1mMSAtZDopOiRaT09LRUVQRVJfQ0xJRU5UX1BPUlQyIgogICAgICAgICBlY2hvICIkWk9PS0VFUEVSX0lEIiA+ICRaT09LRUVQRVJfREFUQV9ESVIvbXlpZAogICAgICAgICBaT09LRUVQRVJfQ0xVU1RFUj0xCiAgICAgIGVsc2UKICAgICAgICAgZWNobyAiUnVubmluZyB6b29rZWVwZXIgc2luZ2xlIG5vZGUuLi4iCiAgICAgIGZpCiAgIAogICAgICBpZiBbICIkWk9PS0VFUEVSX1NFUlZFUjMiICE9ICIiIF0KICAgICAgdGhlbgogICAgICAgICBlY2hvICJSdW5uaW5nIHpvb2tlZXBlciBjbHVzdGVyIHdpdGggMyBzZXJ2ZXJzLi4uIgogICAgICAgICBlY2hvICJzZXJ2ZXIuMz0ke1pPT0tFRVBFUl9TRVJWRVIzfSIgPj4gIiRLQUZLQV9IT01FL2NvbmZpZy96b29rZWVwZXIucHJvcGVydGllcyIKICAgICAgICAgWk9PS0VFUEVSX1NFUlZFUl9DT05ORUNUPSIke1pPT0tFRVBFUl9TRVJWRVJfQ09OTkVDVH0sJChlY2hvICRaT09LRUVQRVJfU0VSVkVSMyB8IGN1dCAtZjEgLWQ6KTokWk9PS0VFUEVSX0NMSUVOVF9QT1JUMyIKICAgICAgZWxzZQogICAgICAgICBlY2hvICJSdW5uaW5nIHpvb2tlZXBlciBzaW5nbGUgbm9kZS4uLiIKICAgICAgZmkKICAgZWxzZQogICAgICBlY2hvICJSdW5uaW5nIGthZmthIG9ubHkgb24gdGhpcyBub2RlLi4uLiIKICAgICAgZWNobyAiQ2hlY2tpbmcgem9va2VlcGVyIHNlcnZlcihzKS4uLiIKICAgICAgaWYgWyAiJFpPT0tFRVBFUl9TRVJWRVIxIiAhPSAiIiBdCiAgICAgIHRoZW4KICAgICAgICAgWk9PU0VSVkVSPSQoZWNobyAkWk9PS0VFUEVSX1NFUlZFUjEgfCBjdXQgLWYxIC1kOikKICAgICAgICAgWlNUQVQ9JChlY2hvIHJ1b2sgfCBuYyAtdiAkWk9PU0VSVkVSICR7Wk9PS0VFUEVSX0NMSUVOVF9QT1JUMX0gLXcxIDI+L2Rldi9udWxsKQogICAgICAgICBbWyAiJFpTVEFUIiA9ICIiIF1dICYmIGVjaG8gIlpvb2tlZXBlciBzZXJ2ZXIgIzEgJFpPT1NFUlZFUjokWk9PS0VFUEVSX0NMSUVOVF9QT1JUMSBpcyBub3QgcnVubmluZywgcGxlYXNlIGNoZWNrIGl0Li4uIGV4aXRpbmcuLi4iICYmIGV4aXQgMSB8fCBlY2hvICJab29rZWVwZXIgc2VydmVyICMxICRaT09TRVJWRVI6JFpPT0tFRVBFUl9DTElFTlRfUE9SVDEgaXMgcnVubmluZy4uLiIKICAgICAgICAgWk9PS0VFUEVSX1NFUlZFUl9DT05ORUNUPSIkWk9PU0VSVkVSOiRaT09LRUVQRVJfQ0xJRU5UX1BPUlQxIgogICAgICAgICBaT09TRVJWRVI9JChlY2hvICRaT09LRUVQRVJfU0VSVkVSMiB8IGN1dCAtZjEgLWQ6KQogICAgICAgICBaU1RBVD0kKGVjaG8gcnVvayB8IG5jIC12ICRaT09TRVJWRVIgJHtaT09LRUVQRVJfQ0xJRU5UX1BPUlQyfSAtdzEgMj4vZGV2L251bGwpCiAgICAgICAgIFtbICIkWlNUQVQiID0gIiIgXV0gJiYgZWNobyAiWm9va2VlcGVyIHNlcnZlciAjMiAkWk9PU0VSVkVSOiRaT09LRUVQRVJfQ0xJRU5UX1BPUlQyIGlzIG5vdCBydW5uaW5nLCBwbGVhc2UgY2hlY2sgaXQuLi4gZXhpdGluZy4uLiIgJiYgZXhpdCAxIHx8IGVjaG8gIlpvb2tlZXBlciBzZXJ2ZXIgIzIgJFpPT1NFUlZFUjokWk9PS0VFUEVSX0NMSUVOVF9QT1JUMiBpcyBydW5uaW5nLi4uIgogICAgICAgICBaT09LRUVQRVJfU0VSVkVSX0NPTk5FQ1Q9IiRaT09LRUVQRVJfU0VSVkVSX0NPTk5FQ1QsJFpPT1NFUlZFUjokWk9PS0VFUEVSX0NMSUVOVF9QT1JUMiIKICAgICAgICAgWk9PU0VSVkVSPSQoZWNobyAkWk9PS0VFUEVSX1NFUlZFUjMgfCBjdXQgLWYxIC1kOikKICAgICAgICAgWlNUQVQ9JChlY2hvIHJ1b2sgfCBuYyAtdiAkWk9PU0VSVkVSICR7Wk9PS0VFUEVSX0NMSUVOVF9QT1JUM30gLXcxIDI+L2Rldi9udWxsKQogICAgICAgICBbWyAiJFpTVEFUIiA9ICIiIF1dICYmIGVjaG8gIlpvb2tlZXBlciBzZXJ2ZXIgIzMgJFpPT1NFUlZFUjokWk9PS0VFUEVSX0NMSUVOVF9QT1JUMyBpcyBub3QgcnVubmluZywgcGxlYXNlIGNoZWNrIGl0Li4uIGV4aXRpbmcuLi4iICYmIGV4aXQgMSB8fCBlY2hvICJab29rZWVwZXIgc2VydmVyICMzICRaT09TRVJWRVI6JFpPT0tFRVBFUl9DTElFTlRfUE9SVDMgaXMgcnVubmluZy4uLiIKICAgICAgICAgWk9PS0VFUEVSX1NFUlZFUl9DT05ORUNUPSIkWk9PS0VFUEVSX1NFUlZFUl9DT05ORUNULCRaT09TRVJWRVI6JFpPT0tFRVBFUl9DTElFTlRfUE9SVDMiCiAgICAgIGZpCiAgIGZpIAoKICAgZWNobyAiQ3JlYXRpbmcgY29uZmlnIGZpbGUgc2VydmVyLnByb3BlcnRpZXMiCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy9zZXJ2ZXIucHJvcGVydGllcyIgIm51bS5uZXR3b3JrLnRocmVhZHMiICIke0tBRktBX05FVFdPUktfVEhSRUFEU30iCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy9zZXJ2ZXIucHJvcGVydGllcyIgImJyb2tlci5pZCIgIiR7S0FGS0FfQlJPS0VSX0lEfSIKICAgZ2VuX2NvbmZpZyAiJEtBRktBX0hPTUUvY29uZmlnL3NlcnZlci5wcm9wZXJ0aWVzIiAiYnJva2VyLnJhY2siICIke0tBRktBX0JST0tFUl9SQUNLfSIgMQogICBnZW5fY29uZmlnICIkS0FGS0FfSE9NRS9jb25maWcvc2VydmVyLnByb3BlcnRpZXMiICJsaXN0ZW5lcnMiICIke0tBRktBX0xJU1RFTkVSU30iCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy9zZXJ2ZXIucHJvcGVydGllcyIgIm51bS5pby50aHJlYWRzIiAiJHtLQUZLQV9JT19USFJFQURTfSIKICAgZ2VuX2NvbmZpZyAiJEtBRktBX0hPTUUvY29uZmlnL3NlcnZlci5wcm9wZXJ0aWVzIiAic29ja2V0LnNlbmQuYnVmZmVyLmJ5dGVzIiAiJHtLQUZLQV9TT0NLU0VORF9CVUZGRVJ9IgogICBnZW5fY29uZmlnICIkS0FGS0FfSE9NRS9jb25maWcvc2VydmVyLnByb3BlcnRpZXMiICJzb2NrZXQucmVjZWl2ZS5idWZmZXIuYnl0ZXMiICIke0tBRktBX1NPQ0tSRUNWX0JVRkZFUn0iCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy9zZXJ2ZXIucHJvcGVydGllcyIgInNvY2tldC5yZXF1ZXN0Lm1heC5ieXRlcyIgIiR7S0FGS0FfU09DS1JFUV9NQVhCWVRFU30iCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy9zZXJ2ZXIucHJvcGVydGllcyIgImxvZy5kaXJzIiAiJHtLQUZLQV9MT0dTX0RJUn0iCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy9zZXJ2ZXIucHJvcGVydGllcyIgIm51bS5wYXJ0aXRpb25zIiAiJHtLQUZLQV9OVU1fUEFSVElUSU9OU30iCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy9zZXJ2ZXIucHJvcGVydGllcyIgIm51bS5yZWNvdmVyeS50aHJlYWRzLnBlci5kYXRhLmRpciIgIiR7S0FGS0FfUkVDT1RIUkVBRF9QRVJEQVRBRElSfSIKICAgZ2VuX2NvbmZpZyAiJEtBRktBX0hPTUUvY29uZmlnL3NlcnZlci5wcm9wZXJ0aWVzIiAib2Zmc2V0cy50b3BpYy5yZXBsaWNhdGlvbi5mYWN0b3IiICIke0tBRktBX09GRlNFVFNUT1BJQ19SRVBMSUNBRkFDVE9SfSIKICAgZ2VuX2NvbmZpZyAiJEtBRktBX0hPTUUvY29uZmlnL3NlcnZlci5wcm9wZXJ0aWVzIiAidHJhbnNhY3Rpb24uc3RhdGUubG9nLnJlcGxpY2F0aW9uLmZhY3RvciIgIiR7S0FGS0FfVFJBTlNUQVRFTE9HX1JFUExJQ0FGQUNUT1J9IiAKICAgZ2VuX2NvbmZpZyAiJEtBRktBX0hPTUUvY29uZmlnL3NlcnZlci5wcm9wZXJ0aWVzIiAidHJhbnNhY3Rpb24uc3RhdGUubG9nLm1pbi5pc3IiICIke0tBRktBX1RSQU5TVEFURUxPR19NSU5JU1J9IgogICBnZW5fY29uZmlnICIkS0FGS0FfSE9NRS9jb25maWcvc2VydmVyLnByb3BlcnRpZXMiICJsb2cuZmx1c2guaW50ZXJ2YWwubWVzc2FnZXMiICIke0tBRktBX0xPR0ZMVVNIX0lOVEVSVkFMTVNHfSIKICAgZ2VuX2NvbmZpZyAiJEtBRktBX0hPTUUvY29uZmlnL3NlcnZlci5wcm9wZXJ0aWVzIiAibG9nLmZsdXNoLmludGVydmFsLm1zIiAiJHtLQUZLQV9MT0dGTFVTSF9JTlRFUlZBTFRJTUV9IgogICBnZW5fY29uZmlnICIkS0FGS0FfSE9NRS9jb25maWcvc2VydmVyLnByb3BlcnRpZXMiICJsb2cucmV0ZW50aW9uLmhvdXJzIiAiJHtLQUZLQV9MT0dSRVRFTlRJT05fSE9VUlN9IgogICBnZW5fY29uZmlnICIkS0FGS0FfSE9NRS9jb25maWcvc2VydmVyLnByb3BlcnRpZXMiICJsb2cucmV0ZW50aW9uLmJ5dGVzIiAiJHtLQUZLQV9MT0dSRVRFTlRJT05fQllURVN9IgogICBnZW5fY29uZmlnICIkS0FGS0FfSE9NRS9jb25maWcvc2VydmVyLnByb3BlcnRpZXMiICJsb2cuc2VnbWVudC5ieXRlcyIgIiR7S0FGS0FfTE9HU0VHTUVOVF9CWVRFU30iCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy9zZXJ2ZXIucHJvcGVydGllcyIgImxvZy5yZXRlbnRpb24uY2hlY2suaW50ZXJ2YWwubXMiICIke0tBRktBX0xPR1JFVEVOVElPTl9DSEVDS0lOVEVSVkFMfSIKICAgZ2VuX2NvbmZpZyAiJEtBRktBX0hPTUUvY29uZmlnL3NlcnZlci5wcm9wZXJ0aWVzIiAiem9va2VlcGVyLmNvbm5lY3QiICIke1pPT0tFRVBFUl9TRVJWRVJfQ09OTkVDVH0iCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy9zZXJ2ZXIucHJvcGVydGllcyIgInpvb2tlZXBlci5jb25uZWN0aW9uLnRpbWVvdXQubXMiICIke1pPT0tFRVBFUl9DT05ORUNUSU9OX1RJTUVPVVR9IgoKICAgZWNobyAiQ3JlYXRpbmcgY29uZmlnIGZpbGUgcHJvZHVjZXIucHJvcGVydGllcyIKICAgZ2VuX2NvbmZpZyAiJEtBRktBX0hPTUUvY29uZmlnL3Byb2R1Y2VyLnByb3BlcnRpZXMiICJwYXJ0aXRpb25lci5jbGFzcyIgICIkS0FGS0FfUEFSVElUSU9ORVJfQ0xBU1MiCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy9wcm9kdWNlci5wcm9wZXJ0aWVzIiAicmVxdWVzdC50aW1lb3V0Lm1zIiAgIiRLQUZLQV9SRVFVRVNUX1RJTUVPVVQiCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy9wcm9kdWNlci5wcm9wZXJ0aWVzIiAibWF4LmJsb2NrLm1zIiAgIiRLQUZLQV9NQVhfQkxPQ0siCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy9wcm9kdWNlci5wcm9wZXJ0aWVzIiAibGluZ2VyLm1zIiAgIiRLQUZLQV9MSU5HRVIiCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy9wcm9kdWNlci5wcm9wZXJ0aWVzIiAibWF4LnJlcXVlc3Quc2l6ZSIgICIkS0FGS0FfTUFYUkVRX1NJWkUiCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy9wcm9kdWNlci5wcm9wZXJ0aWVzIiAiYmF0Y2guc2l6ZSIgICIkS0FGS0FfQkFUQ0hfU0laRSIKICAgZ2VuX2NvbmZpZyAiJEtBRktBX0hPTUUvY29uZmlnL3Byb2R1Y2VyLnByb3BlcnRpZXMiICJidWZmZXIubWVtb3J5IiAgIiRLQUZLQV9CVUZGRVJfTUVNT1JZIgogICBnZW5fY29uZmlnICIkS0FGS0FfSE9NRS9jb25maWcvcHJvZHVjZXIucHJvcGVydGllcyIgImJvb3RzdHJhcC5zZXJ2ZXJzIiAiJHtLQUZLQV9CT09UU1RSQVBfU0VSVkVSU30iCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy9wcm9kdWNlci5wcm9wZXJ0aWVzIiAiY29tcHJlc3Npb24udHlwZSIgIiR7S0FGS0FfQ09NUFJFU1NJT05fVFlQRX0iCgogICBlY2hvICJDcmVhdGluZyBjb25maWcgZmlsZSBjb25zdW1lci5wcm9wZXJ0aWVzIgogICBnZW5fY29uZmlnICIkS0FGS0FfSE9NRS9jb25maWcvY29uc3VtZXIucHJvcGVydGllcyIgImJvb3RzdHJhcC5zZXJ2ZXJzIiAiJHtLQUZLQV9CT09UU1RSQVBfU0VSVkVSU30iCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy9jb25zdW1lci5wcm9wZXJ0aWVzIiAiYXV0by5vZmZzZXQucmVzZXQiICAiJEtBRktBX0FVVE9PRkZTRVRfUkVTRVQiCiAgIGdlbl9jb25maWcgIiRLQUZLQV9IT01FL2NvbmZpZy9jb25zdW1lci5wcm9wZXJ0aWVzIiAiZ3JvdXAuaWQiICAiJEtBRktBX0dST1VQX0lEIgoKZmkKICAgCkNVUlJESVI9JChwd2QpICAKY2QgJEtBRktBX0hPTUUKCmV4cG9ydCBKQVZBX0hPTUU9JEpBVkFfSE9NRQoKaWYgWyAiJE5PREVfVVNBR0UiID0gImJvdGgiIF0KdGhlbgogICAgcnVuX3pvb2tlZXBlcgogICAgcnVuX2thZmthCmVsaWYgWyAiJE5PREVfVVNBR0UiID0gInpvb2tlZXBlciIgXQp0aGVuCiAgICBydW5fem9va2VlcGVyCmVsc2UKICAgIHJ1bl9rYWZrYQpmaQoKY2QgJENVUlJESVIK" | base64 -d > /usr/local/bin/entrypoint-kafka.sh && chmod ugo+x /usr/local/bin/entrypoint-kafka.sh
ENTRYPOINT ["/usr/local/bin/entrypoint-kafka.sh"]
